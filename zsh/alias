#!/usr/bin/env zsh
# shellcheck disable=SC2154,SC2142,SC2139

alias hr="eval printf %.1s '—{1..'\"\${COLUMNS:-\$(tput cols)}\"\}; echo"
alias bat="hr && bat"
alias del="rm -rfv"
alias els="exa -alF --group-directories-first --git"
alias dls="lsd -lA --group-dirs first --date relative --blocks permission,date,size,name"
alias ff="tree -i -f | grep"
alias tree="pwd && tree -aIC 'node_modules|.git' --dirsfirst --sort=name"

alias aptin="\${DOT_FOLDER_TOOLS}/apt.sh"
alias aptup="apt-get update && apt-get dist-upgrade && apt-get autoremove && apt-get clean"
alias aptups="sudo -- sh -c '$(whence aptup)'"

alias brewin="\${DOT_FOLDER_TOOLS}/brew.sh"
alias brewcin="\${DOT_FOLDER_TOOLS}/cask.sh"
alias brewup="echo \"\${C_GREEN}brews installed:\${C_OFF}\" && brew list --formula && echo \"\${C_YELLOW}casks installed:\${C_OFF}\" && brew list --cask && brew analytics off && brew update && brew upgrade && brew cleanup && brew doctor"

alias npmin="\${DOT_FOLDER_TOOLS}/npm.sh"
alias npmls="npm ls -g --depth=0 && npm outdated -g && echo && pnpm ls -g && echo && pnpm outdated -g"
alias npmup="for package in \$(npm -g outdated --parseable --depth=0 | cut -d: -f4); do if [[ ! \"\${package}\" =~ ^npm@ ]]; then echo \"\n➡️  \"\${package}\"\" && npm i -g \"\${package}\"; fi; done && pnpm i \$(pnpm outdated -g --no-table | cut -d' ' -f 3 | tr '\n' '@' | sed -r 's/@@|@$/ /g') -g"
alias npmcl="pnpm ls -g --json | jq -r '.[0].dependencies|keys|join(\"\n\")' | xargs pnpm remove -g && npm ls -g --json | jq -r '.dependencies|keys-[\"npm\"]|join(\"\n\")' | xargs npm remove -g"

alias nvmup="nvm install node && npmin"
alias nvmin="nvm install \$(cat .nvmrc) && npmin"
alias nvmcl="del \$(ls -td \${NVM_DIR}/versions/node/* | tail -n +2) && del \${NVM_DIR}/.cache/bin"
alias nvmls="echo \"\${C_BLUE}npm current:\${C_OFF} v\$(npm -v)\" && echo \"\${C_BLUE}pnpm current:\${C_OFF} v\$(pnpm -v)\" && echo \"\${C_MAGENTA}node current:\${C_OFF} \$(node -v)\" && echo \"\${C_MAGENTA}node remote:\${C_OFF} \$(nvm version-remote)\" && echo && nvm ls"

alias st="speed-test -b -v"
alias dst="dd if=/dev/zero of=./testfile.mad bs=8k count=30000 && del ./testfile.mad"

alias gs="git status -s"
alias ga="git add . && gs"
alias gp="git push"
alias gpl="git pull origin master --no-edit"
alias gplo="git pull origin \$(git branch | grep '\*' | cut -d' ' -f2-) --no-edit"
alias grh="git reset --hard"
alias gbd="git branch -D \$(git branch | grep -v \* | xargs)"

alias syncbb="git pull origin master --no-edit && git pull bb master --no-edit && git push origin master && git push bb master"

alias depup="gpl && ncu -u && npm run setup && ga && gce 'update deps' && gp"

alias sdock="defaults write com.apple.dock persistent-apps -array-add '{tile-data={}; tile-type='spacer-tile';}' && killall Dock"
